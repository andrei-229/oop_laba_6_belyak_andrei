# Лабораторная работа №6

## Тема: "Паттерны проектирования"

### Цель:

• Закрепление паттернов SOLID

### Порядок выполнения работы

1. Ознакомиться с теоретическим материалом.
2. Получить у преподавателя вариант задания. (Вариант 13)
3. Реализовать задание своего варианта в соответствии с поставленными требованиями.
4. Подготовить тестовые наборы данных.
5. Создать репозиторий на GitHub.
6. Отправить файлы лабораторной работы в репозиторий.
7. Отчитаться по выполненной работе путём демонстрации работающей программы на тестовых наборах данных (как подготовленных самостоятельно, так и предложенных преподавателем) и ответов на вопросы преподавателя (как из числа контрольных, так и по реализации программы).

### Требования к программе

Разработать редактор подземелья для RPG игры Balagur Fate 3. Программа должна позволять моделировать базовые локации, расставляя на них NPC (non-player characters).

Редактор должен позволять:
- Добавлять новых NPC по координатам (0 ≤ x ≤ 500, 0 ≤ y ≤ 500 метров)
- У каждого типа объекта должно быть уникальное имя
- Сохранять объекты в файл и загружать из файла
- Печатать перечень объектов на экран (с типом объектов, координатами и именем)
- Запускать боевой режим с указанием дальности, на которой могут сражаться NPC

**Типы NPC:**
- **Dragon (Дракон)** - убивает рыцарей
- **Frog (Жаба)** - ест всех (включая других жаб)
- **Knight (Странствующий рыцарь)** - убивает драконов

**Правила боя:**
- Жаба ест всех (включая жаб)
- Рыцарь убивает драконов
- Дракон убивает рыцарей
- Проигравший NPC удаляется, могут погибнуть оба

**Обязательные паттерны проектирования:**
- **Factory** - для создания NPC и загрузки NPC из файла
- **Visitor** - для проведения цикла сражения
- **Observer** - для печати событий о совершенных убийствах (два класса Observer - для записи в файл "log.txt" и для печати на экран)

Файлы:

• `include/npc.h`, `src/npc.cpp` — базовый класс NPC  
• `include/dragon.h`, `src/dragon.cpp` — класс Dragon  
• `include/frog.h`, `src/frog.cpp` — класс Frog  
• `include/knight.h`, `src/knight.cpp` — класс Knight  
• `include/factory.h`, `src/factory.cpp` — фабрика для создания NPC (паттерн Factory)  
• `include/visitor.h`, `src/visitor.cpp` — базовый класс Visitor  
• `include/battle_visitor.h`, `src/battle_visitor.cpp` — реализация боевого режима (паттерн Visitor)  
• `include/observer.h` — базовый интерфейс Observer  
• `include/console_observer.h`, `src/console_observer.cpp` — наблюдатель для консоли  
• `include/file_observer.h`, `src/file_observer.cpp` — наблюдатель для файла (паттерн Observer)  
• `include/editor.h`, `src/editor.cpp` — главный класс редактора  
• `src/main.cpp` — демонстрация работы редактора  

## Структура проекта

```
oop_laba_6_belyak_andrei/
├── include/
│   ├── npc.h                    # Базовый класс NPC
│   ├── dragon.h                 # Класс Dragon
│   ├── frog.h                   # Класс Frog
│   ├── knight.h                 # Класс Knight
│   ├── factory.h                # Фабрика NPC (Factory)
│   ├── visitor.h                # Базовый класс Visitor
│   ├── battle_visitor.h         # Боевой режим (Visitor)
│   ├── observer.h               # Базовый интерфейс Observer
│   ├── console_observer.h       # Консольный наблюдатель (Observer)
│   ├── file_observer.h          # Файловый наблюдатель (Observer)
│   └── editor.h                 # Главный класс редактора
├── src/
│   ├── main.cpp                 # Главная программа
│   ├── npc.cpp
│   ├── dragon.cpp
│   ├── frog.cpp
│   ├── knight.cpp
│   ├── factory.cpp
│   ├── visitor.cpp
│   ├── battle_visitor.cpp
│   ├── console_observer.cpp
│   ├── file_observer.cpp
│   └── editor.cpp
├── CMakeLists.txt               # CMake файл
└── README.md                    # Данный файл
```

## Сборка и запуск проекта

Сборка:

```bash
# Конфигурация проекта
mkdir build
cd build
cmake ..

# Сборка проекта
cmake --build .
```

Запуск:

```bash
./dungeon_editor
```

Описание:

• Реализованы три типа NPC: Dragon, Frog, Knight  
• `NPCFactory` создаёт объекты NPC по типу (паттерн Factory)  
• `BattleVisitor` проводит боевой режим между NPC (паттерн Visitor)  
• `ConsoleObserver` и `FileObserver` логируют события боя (паттерн Observer)  
• При разрушении Editor освобождаются все ресурсы  
• Координаты NPC проверяются на диапазон [0, 500]  
• Имена NPC должны быть уникальными
